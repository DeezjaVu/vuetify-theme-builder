import{L as C,aZ as ee,af as p,av as te,aw as ae,M as oe,N as le,O as re,ag as ne,Q as se,T as ie,Y as ce,b2 as ue,ap as de,b1 as ve,ay as he,az as me,aA as be,W as ge,_ as ke,a7 as w,b as r,bZ as x,$ as A,r as N,I as V,bO as E,aW as P,bN as fe,a5 as B,o as ye,b_ as Ce,b$ as I,c0 as R,c1 as T,c2 as $,c3 as L,c4 as we,c5 as W,x as X,b9 as Se,c6 as D,c7 as Y,c8 as Z,c9 as Pe,bv as Ve,K as pe,ca as xe,bX as _e,R as He,U as j,b0 as Ee,cb as Re,ao as Be,ab as Me}from"./index-Cl5c4lyD.js";import{b as F}from"./VSlider-m2QMI3CW.js";const q=C({color:String,...ee(),...p(),...te(),...ae(),...oe(),...le(),...re(),...ne(),...se()},"VSheet"),U=ie()({name:"VSheet",props:q(),setup(e,t){let{slots:a}=t;const{themeClasses:i}=ce(e),{backgroundColorClasses:u,backgroundColorStyles:o}=ue(de(e,"color")),{borderClasses:l}=ve(e),{dimensionStyles:c}=he(e),{elevationClasses:s}=me(e),{locationStyles:m}=be(e),{positionClasses:g}=ge(e),{roundedClasses:S}=ke(e);return w(()=>r(e.tag,{class:["v-sheet",i.value,u.value,l.value,s.value,g.value,S.value,e.class],style:[o.value,c.value,m.value,e.style]},a)),{}}}),Ae=C({color:{type:Object},disabled:Boolean,dotSize:{type:[Number,String],default:10},height:{type:[Number,String],default:150},width:{type:[Number,String],default:300},...p()},"VColorPickerCanvas"),Ne=x({name:"VColorPickerCanvas",props:Ae(),emits:{"update:color":e=>!0,"update:position":e=>!0},setup(e,t){let{emit:a}=t;const i=A(!1),u=N(),o=A(parseFloat(e.width)),l=A(parseFloat(e.height)),c=N({x:0,y:0}),s=V({get:()=>c.value,set(n){var h,k;if(!u.value)return;const{x:d,y:v}=n;c.value=n,a("update:color",{h:((h=e.color)==null?void 0:h.h)??0,s:E(d,0,o.value)/o.value,v:1-E(v,0,l.value)/l.value,a:((k=e.color)==null?void 0:k.a)??1})}}),m=V(()=>{const{x:n,y:d}=s.value,v=parseInt(e.dotSize,10)/2;return{width:P(e.dotSize),height:P(e.dotSize),transform:`translate(${P(n-v)}, ${P(d-v)})`}}),{resizeRef:g}=fe(n=>{var h;if(!((h=g.el)!=null&&h.offsetParent))return;const{width:d,height:v}=n[0].contentRect;o.value=d,l.value=v});function S(n,d,v){const{left:h,top:k,width:Q,height:J}=v;s.value={x:E(n-h,0,Q),y:E(d-k,0,J)}}function _(n){n.type==="mousedown"&&n.preventDefault(),!e.disabled&&(b(n),window.addEventListener("mousemove",b),window.addEventListener("mouseup",H),window.addEventListener("touchmove",b),window.addEventListener("touchend",H))}function b(n){if(e.disabled||!u.value)return;i.value=!0;const d=Ce(n);S(d.clientX,d.clientY,u.value.getBoundingClientRect())}function H(){window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",H),window.removeEventListener("touchmove",b),window.removeEventListener("touchend",H)}function M(){var k;if(!u.value)return;const n=u.value,d=n.getContext("2d");if(!d)return;const v=d.createLinearGradient(0,0,n.width,0);v.addColorStop(0,"hsla(0, 0%, 100%, 1)"),v.addColorStop(1,`hsla(${((k=e.color)==null?void 0:k.h)??0}, 100%, 50%, 1)`),d.fillStyle=v,d.fillRect(0,0,n.width,n.height);const h=d.createLinearGradient(0,0,0,n.height);h.addColorStop(0,"hsla(0, 0%, 0%, 0)"),h.addColorStop(1,"hsla(0, 0%, 0%, 1)"),d.fillStyle=h,d.fillRect(0,0,n.width,n.height)}return B(()=>{var n;return(n=e.color)==null?void 0:n.h},M,{immediate:!0}),B(()=>[o.value,l.value],(n,d)=>{M(),c.value={x:s.value.x*n[0]/d[0],y:s.value.y*n[1]/d[1]}},{flush:"post"}),B(()=>e.color,()=>{if(i.value){i.value=!1;return}c.value=e.color?{x:e.color.s*o.value,y:(1-e.color.v)*l.value}:{x:0,y:0}},{deep:!0,immediate:!0}),ye(()=>M()),w(()=>r("div",{ref:g,class:["v-color-picker-canvas",e.class],style:e.style,onMousedown:_,onTouchstartPassive:_},[r("canvas",{ref:u,width:o.value,height:l.value},null),e.color&&r("div",{class:["v-color-picker-canvas__dot",{"v-color-picker-canvas__dot--disabled":e.disabled}],style:m.value},null)])),{}}});function Oe(e,t){if(t){const{a,...i}=e;return i}return e}function ze(e,t){if(t==null||typeof t=="string"){const a=I(e);return e.a===1?a.slice(0,7):a}if(typeof t=="object"){let a;return R(t,["r","g","b"])?a=T(e):R(t,["h","s","l"])?a=$(e):R(t,["h","s","v"])&&(a=e),Oe(a,!R(t,["a"])&&e.a===1)}return e}const y={h:0,s:0,v:0,a:1},O={inputProps:{type:"number",min:0},inputs:[{label:"R",max:255,step:1,getValue:e=>Math.round(e.r),getColor:(e,t)=>({...e,r:Number(t)})},{label:"G",max:255,step:1,getValue:e=>Math.round(e.g),getColor:(e,t)=>({...e,g:Number(t)})},{label:"B",max:255,step:1,getValue:e=>Math.round(e.b),getColor:(e,t)=>({...e,b:Number(t)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)})}],to:T,from:L};var G;const Le={...O,inputs:(G=O.inputs)==null?void 0:G.slice(0,3)},z={inputProps:{type:"number",min:0},inputs:[{label:"H",max:360,step:1,getValue:e=>Math.round(e.h),getColor:(e,t)=>({...e,h:Number(t)})},{label:"S",max:1,step:.01,getValue:e=>Math.round(e.s*100)/100,getColor:(e,t)=>({...e,s:Number(t)})},{label:"L",max:1,step:.01,getValue:e=>Math.round(e.l*100)/100,getColor:(e,t)=>({...e,l:Number(t)})},{label:"A",max:1,step:.01,getValue:e=>{let{a:t}=e;return t!=null?Math.round(t*100)/100:1},getColor:(e,t)=>({...e,a:Number(t)})}],to:$,from:we},De={...z,inputs:z.inputs.slice(0,3)},K={inputProps:{type:"text"},inputs:[{label:"HEXA",getValue:e=>e,getColor:(e,t)=>t}],to:I,from:W},je={...K,inputs:[{label:"HEX",getValue:e=>e.slice(0,7),getColor:(e,t)=>t}]},f={rgb:Le,rgba:O,hsl:De,hsla:z,hex:je,hexa:K},Fe=e=>{let{label:t,...a}=e;return r("div",{class:"v-color-picker-edit__input"},[r("input",a,null),r("span",null,[t])])},Ue=C({color:Object,disabled:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(f).includes(e)},modes:{type:Array,default:()=>Object.keys(f),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(f).includes(t))},...p()},"VColorPickerEdit"),Ge=x({name:"VColorPickerEdit",props:Ue(),emits:{"update:color":e=>!0,"update:mode":e=>!0},setup(e,t){let{emit:a}=t;const i=V(()=>e.modes.map(o=>({...f[o],name:o}))),u=V(()=>{var c;const o=i.value.find(s=>s.name===e.mode);if(!o)return[];const l=e.color?o.to(e.color):null;return(c=o.inputs)==null?void 0:c.map(s=>{let{getValue:m,getColor:g,...S}=s;return{...o.inputProps,...S,disabled:e.disabled,value:l&&m(l),onChange:_=>{const b=_.target;b&&a("update:color",o.from(g(l??o.to(y),b.value)))}}})});return w(()=>{var o;return r("div",{class:["v-color-picker-edit",e.class],style:e.style},[(o=u.value)==null?void 0:o.map(l=>r(Fe,l,null)),i.value.length>1&&r(X,{icon:"$unfold",size:"x-small",variant:"plain",onClick:()=>{const l=i.value.findIndex(c=>c.name===e.mode);a("update:mode",i.value[(l+1)%i.value.length].name)}},null)])}),{}}}),Ie=C({color:{type:Object},disabled:Boolean,hideAlpha:Boolean,...p()},"VColorPickerPreview"),Te=x({name:"VColorPickerPreview",props:Ie(),emits:{"update:color":e=>!0},setup(e,t){let{emit:a}=t;const i=new AbortController;Se(()=>i.abort());async function u(){if(!D)return;const o=new window.EyeDropper;try{const l=await o.open({signal:i.signal}),c=W(l.sRGBHex);a("update:color",{...e.color??y,...c})}catch{}}return w(()=>{var o,l;return r("div",{class:["v-color-picker-preview",{"v-color-picker-preview--hide-alpha":e.hideAlpha},e.class],style:e.style},[D&&r("div",{class:"v-color-picker-preview__eye-dropper",key:"eyeDropper"},[r(X,{onClick:u,icon:"$eyeDropper",variant:"plain",density:"comfortable"},null)]),r("div",{class:"v-color-picker-preview__dot"},[r("div",{style:{background:Y(e.color??y)}},null)]),r("div",{class:"v-color-picker-preview__sliders"},[r(F,{class:"v-color-picker-preview__track v-color-picker-preview__hue",modelValue:(o=e.color)==null?void 0:o.h,"onUpdate:modelValue":c=>a("update:color",{...e.color??y,h:c}),step:0,min:0,max:360,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null),!e.hideAlpha&&r(F,{class:"v-color-picker-preview__track v-color-picker-preview__alpha",modelValue:((l=e.color)==null?void 0:l.a)??1,"onUpdate:modelValue":c=>a("update:color",{...e.color??y,a:c}),step:1/256,min:0,max:1,disabled:e.disabled,thumbSize:14,trackSize:8,trackFillColor:"white",hideDetails:!0},null)])])}),{}}}),$e=C({swatches:{type:Array,default:()=>We(_e)},disabled:Boolean,color:Object,maxHeight:[Number,String],...p()},"VColorPickerSwatches");function We(e){return Object.keys(e).map(t=>{const a=e[t];return a.base?[a.base,a.darken4,a.darken3,a.darken2,a.darken1,a.lighten1,a.lighten2,a.lighten3,a.lighten4,a.lighten5]:[a.black,a.white,a.transparent]})}const Xe=x({name:"VColorPickerSwatches",props:$e(),emits:{"update:color":e=>!0},setup(e,t){let{emit:a}=t;return w(()=>r("div",{class:["v-color-picker-swatches",e.class],style:[{maxHeight:P(e.maxHeight)},e.style]},[r("div",null,[e.swatches.map(i=>r("div",{class:"v-color-picker-swatches__swatch"},[i.map(u=>{const o=Z(u),l=L(o),c=Pe(o);return r("div",{class:"v-color-picker-swatches__color",onClick:()=>l&&a("update:color",l)},[r("div",{style:{background:c}},[e.color&&Ve(e.color,l)?r(pe,{size:"x-small",icon:"$success",color:xe(u,"#FFFFFF")>2?"white":"black"},null):void 0])])})]))])])),{}}}),Ye=C({canvasHeight:{type:[String,Number],default:150},disabled:Boolean,dotSize:{type:[Number,String],default:10},hideCanvas:Boolean,hideSliders:Boolean,hideInputs:Boolean,mode:{type:String,default:"rgba",validator:e=>Object.keys(f).includes(e)},modes:{type:Array,default:()=>Object.keys(f),validator:e=>Array.isArray(e)&&e.every(t=>Object.keys(f).includes(t))},showSwatches:Boolean,swatches:Array,swatchesMaxHeight:{type:[Number,String],default:150},modelValue:{type:[Object,String]},...He(q({width:300}),["height","location","minHeight","maxHeight","minWidth","maxWidth"])},"VColorPicker"),Ke=x({name:"VColorPicker",props:Ye(),emits:{"update:modelValue":e=>!0,"update:mode":e=>!0},setup(e){const t=j(e,"mode"),a=N(null),i=j(e,"modelValue",void 0,s=>{if(s==null||s==="")return null;let m;try{m=L(Z(s))}catch{return null}return m},s=>s?ze(s,e.modelValue):null),u=V(()=>i.value?{...i.value,h:a.value??i.value.h}:null),{rtlClasses:o}=Ee();let l=!0;B(i,s=>{if(!l){l=!0;return}s&&(a.value=s.h)},{immediate:!0});const c=s=>{l=!1,a.value=s.h,i.value=s};return Re(()=>{e.modes.includes(t.value)||(t.value=e.modes[0])}),Be({VSlider:{color:void 0,trackColor:void 0,trackFillColor:void 0}}),w(()=>{const s=U.filterProps(e);return r(U,Me({rounded:e.rounded,elevation:e.elevation,theme:e.theme,class:["v-color-picker",o.value,e.class],style:[{"--v-color-picker-color-hsv":Y({...u.value??y,a:1})},e.style]},s,{maxWidth:e.width}),{default:()=>[!e.hideCanvas&&r(Ne,{key:"canvas",color:u.value,"onUpdate:color":c,disabled:e.disabled,dotSize:e.dotSize,width:e.width,height:e.canvasHeight},null),(!e.hideSliders||!e.hideInputs)&&r("div",{key:"controls",class:"v-color-picker__controls"},[!e.hideSliders&&r(Te,{key:"preview",color:u.value,"onUpdate:color":c,hideAlpha:!t.value.endsWith("a"),disabled:e.disabled},null),!e.hideInputs&&r(Ge,{key:"edit",modes:e.modes,mode:t.value,"onUpdate:mode":m=>t.value=m,color:u.value,"onUpdate:color":c,disabled:e.disabled},null)]),e.showSwatches&&r(Xe,{key:"swatches",color:u.value,"onUpdate:color":c,maxHeight:e.swatchesMaxHeight,swatches:e.swatches,disabled:e.disabled},null)]})}),{}}});export{Ke as V,U as a};
